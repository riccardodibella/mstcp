Multi-Stream TCP Congestion Control

- Gli ACK normali vengono inviati con segmenti DMP, che arrivano in un "treno" al tick successivo di mytimer
- Ad ognuno di questi ACK che arriva, si aumenta la congestion window basandosi su quanti byte sono ACKed da quel segmento
    - Questo consente di gestire in automatico i delayed ACK (incluso accorpamento descritto nella tesi)
- I dupACK si individuano sempre allo stesso modo: segmenti solo ACK vuoti con ack == last_ack
    - I dupACK arrivano uno alla volta, separati a seconda di come sono arrivati i pacchetti dall'altra parte
    - Quando arriva un dupACK si aumenta il contatore dei dupACK (per eventualmente triggerare fast recovery), ma non si aumenta
    a mano la congestion window


- Per avere una struttura concettuale "pulita" si potrebbe fare una FSM piccola che fa solo le transizioni e le modifiche 
alle variabili del TCB, e un wrapper esterno che fa il parsing ai pacchetti, guarda il TCB e decide gli eventi e i parametri
    - Eventi possibili: ACK (con # byte ACKed + SACKed), dupACK (con # byte SACKed), timeout
    - L'evento dupACK deve avere un effetto diverso da quello di ACK nella FSM per l'aumento della cwnd in funzione del numero
    di byte di cui si sta facendo ACK
        - Normalmente, con ACK normale, l'aumento dipende dallo stato della FSM ma è relativamente piccolo, perchè viene liberato
        anche lo spazio del segmento che è stato ACKed
        - con dupACK la cwnd non deve aumentare proprio, perchè viene già liberato lo spazio con i SACK
            - Quindi non ci serve mai sapere il numero di byte ACKed per i dupACK?
            - Allora, per lo stesso ragionamento, con ACK normali vogliamo sapere nella FSM solo il numero di byte ACKed con
            cumulative ACK, non quelli SACKed
- Direi di non tenere traccia di quale stream contribuisce agli ACK
    - La funzione per evitare HoL blocking si può tenere nello scheduler, in cui però si da priorità prima a tutti gli stream 
    senza buchi, e poi agli stream che hanno ancora buchi se avanza spazio nella cwnd
    - In questo modo si possono gestire allo stesso modo i byte ACKed e SACKed nella FSM del congestion control, a cui si può
    passare solo il numero di byte totale per quel pacchetto


